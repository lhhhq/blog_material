---
layout: post
title: 虚拟机中的网络设置
author: lhhhq
comments: true
date: 2015-09-25 18:24:03
description: 最近接触到虚拟机的使用，于是简介了解下虚拟机中的网络配置。
tags:
- 虚拟机
- NAT
categories:
- 网络常识
---

虚拟机中设置网络有三种模式：
1. 桥接模式（Bridged）
2. 网络地址转换模式（NAT）
3. 仅主机模式（Host-only）

**桥接模式**
相当于在宿主机上层网络建立一个虚拟的交换机，使虚拟机和宿主机处在同一网段下，便可以为虚拟机设置独立IP，从而使虚拟机能够对外访问。

**NAT模式**
宿主机的虚拟网卡给虚拟机动态分配IP，形成一个由宿主机和虚拟机组成的新的局域网，然后通过虚拟NAT服务，从而使该局域网能对外访问。在这种模式下，宿主机同时参与宿主局域网和新建的虚拟局域网。

**仅主机模式**
同样是宿主机的虚拟网卡给虚拟机分配IP，只不过少了建立虚拟NAT服务这一步，因此新形成的局域网不能访问公网，只有内部虚拟机之间能够相互访问。在这种模式下，宿主机也是同时参与局域网和新建的虚拟局域网，只不过两个网段不可关联。

虚拟网卡从何而来？
当我们安装好VMware Workstation之后，会自动创建两个虚拟网卡，一个叫VMNet8，用于NAT模式，一个叫VMNet1，用于仅主机模式。这两个模式都是通过宿主机给虚拟机分配IP，因此虚拟网卡位于宿主机。在桥接模式中，也需要虚拟网卡，由于在这种模式下虚拟机可以设置独立IP，因此这个虚拟网卡位于虚拟机上，这个网卡叫VMNet0。

NAT服务是什么？
NAT服务是又叫网络地址转换，内网访问外网无法直接以自己的IP身份访问，因而需要先进行网络地址转换，使它能以宿主网络的IP身份进行访问。这样从外部网络看，只能看到宿主网络IP，而看不到这个IP下建立的局域网。

具体操作
1. 选择网络设置模式。
   选择左侧栏的虚拟机，右键→“设置”，在“虚拟机设置-硬件”对话框中，选择“网络适配器”，在这个界面中选择一种网络连接模式： 
   ![img](http://ce.sysu.edu.cn/hope/UploadFiles/image/jpg/201509/20150925183432505.jpg)
2. 网络连接参数设置。
   选择“编辑”-“虚拟网络编辑器”，在此对话框中，可以对虚拟机网络的一些参数进行设置： 
   ![img](http://ce.sysu.edu.cn/hope/UploadFiles/image/jpg/201509/20150925183838081.jpg)
   具体参数内容比较容易理解，这里不具体列出分析:) 

