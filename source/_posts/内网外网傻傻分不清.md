---
layout: post
title: 内网外网傻傻分不清
author: lhhhq
comments: true
date: 2015-09-13 11:00:22
description: 他们常说的内网外网都是啥？为啥不同电脑登陆同一ftp要用不同的主机？为此请教了网管组的同学，结合自己的理解整理成本篇笔记。
tags:
- 网络常识
categories:
- 学习笔记
---

（注：以下所说的99、100是电脑的名字。

Hope99的ip：10.86.1.99 
在Hope99上登陆ftp时主机输入的是：10.86.1.11

Hope100的ip：172.22.83.44
在Hope100上登陆ftp时主机输入的是：202.116.83.77

我常常听他们说，99是内网，100是外网。

这是什么鬼……而且，为啥99和100登陆ftp要用不同的主机……

IP地址用于识别网络中的各台计算机的位置，一个IP对应一台计算机。按理说，有了IP地址，我们就可以访问世界上任意一台计算机。但实际上并非如此。我们知道，IP(IPv4)的形式总是x.x.x.x(x是0-255内的数字)，因此IP一共就有256×256×256×256这么多个（好多的样子），也就是说它是有限的（据说还不是每个IP都能用）。然而世界上计算机的数量要多得多，IP地址不够用了，怎么办？因此人们一开始就从那堆IP里面划分出一部分，作内部网络用（其实还划分了另一些部分作特殊用处）。于是，一部分IP地址，可以与某台计算机唯一对应，别人可以通过这个IP地址来访问该计算机，这些IP也称实体IP。而一部分IP地址，就用作局域网，也称虚拟IP。一个公司或者学校，申请一个实体IP，就可以对外访问（可以上网了，同时也能被他人访问），公司里面有很多台电脑，这些电脑也要上网，于是就可以由这一个实体IP，将网络分到各台电脑上，怎么分？就（用一个叫DHCP服务器的东西）给电脑们一个个分配IP（就是虚拟IP），外来的数据由实体IP传输到虚拟IP上，就可以对外访问了。然而，这些IP在内网之间可以相互访问，但不能被局域网之外的计算机所访问，或者说不能直接访问（可以通过vpn等手段访问）。显而易见，世界上这么多局域网，所以有可能有重复的虚拟IP地址，但是一个局域网内，每个地址唯一的。

所以对于100，是校园局域网内的一个虚拟IP，而99是工作室局域网内的一个虚拟IP。而工作室对学校，也是局域网跟外部的关系，也就是局域网内的局域网，因此，局域网内某个虚拟IP也是可以进行IP分配的。同时也可以明白，为啥100的网速通常要快于99的了。

局域网专用地址通常是以下三类：
A类：10.0.0.1 - 10.255.255.254
B类：172.16.0.1 - 172.31.255.254
C类：192.168.0.1 - 192.168.255.254

公网地址（实体地址）：0.0.0.0 - 223.255.255.255

还有一些地址做特殊用途，不深入了解了。

一个小补充：
子网掩码：可以结合IP判断两个IP是否在同一网段，一般是255.0.0.0或者255.255.0.0或者255.255.255.0。当子网掩码是255.0.0.0，则IP为a.x.x.x（a固定，x为0-255内任意值）在同一网段；当子网掩码是255.255.0.0，则IP为a.b.x.x(a、b固定，x为0-255内任意值)在同一网段；当子网掩码是255.255.255.0，则IP为a.b.c.x（a、b、c固定，x为0-255内任意值）在同一网段。
默认网关：看门的家伙，一般是一个网段里的第一个IP，最后一个数字都是1。

所以我们救火时pingIP查看网络状况，IP一般从内向外逐级ping，从而判断问题出现在哪一个网段内。

举例：Hope99

首先 ping127.0.0.1（localhost，本机），检查网卡是否有问题。

往上 ping10.86.1.1（自己的网关或者路由器），检查这台电脑到工作室DHCP服务器或路由器之间的通信。

往上 ping202.116.83.77（学院网），检查与学院服务器之间的通信。

再往上 ping...（学校网络中心），检查与网络中心之间的通信。

最后ping外面的网址，如百度等等。

那么99和100同样登陆hope ftp，访问的IP却不同，为什么呢？

先观察一下三者的IP
99：10.86.1.99
100：172.22.83.44
hope：10.86.1.11（99登陆用）202.116.83.77（100登陆用）

发现了吗，它们都是10.86.开头，说明是同一网段的，自然可以访问。而100，我们上面说过，是99的上一级网络，是外网，怎么可以访问跟99同一级的hope呢？当然是不行的，所以才会存在另外一个IP。在202.116.83.77与10.86.0.11之间建立“端口映射”，把上级的IP映射到下级的IP，这样上级就可以访问下级了。